{"version":3,"sources":["components/AuthComponents/SignInButton.js","authConfig.js","components/AuthComponents/SignOutButton.js","components/AuthComponents/GetToken.js","components/APICaller.js","components/apidescriptions.js","api/azurefunctions.js","api/logicapp.js","api/aks.js","components/HomePage.js","App.js","index.js"],"names":["SignInButton","instance","useMsal","className","onClick","loginRedirect","signInClickHandler","loginRequest","scopes","msalConfig","auth","clientId","authority","redirectUri","process","cache","cacheLocation","storeAuthStateInCookie","system","loggerOptions","loggerCallback","level","message","containsPii","LogLevel","Error","console","error","Info","info","Verbose","debug","warn","SignOutButton","log","logoutRequest","account","getAccountByHomeId","postLogoutRedirectUri","logoutRedirect","signOutClickHandler","ProfileContent","props","accounts","useEffect","acquireTokenSilent","then","response","a","setToken","accessToken","APICaller","useState","apiData","setApiData","apicall","token","name","JSON","stringify","CallAzureFunction","options","headers","axios","get","funfact","data","CallLogicApp","CallAKS_KubernetesFunFact","i","Math","floor","random","funfacts","length","fun_fact","CallAKS_MicrosoftFunFact","HomePage","state","jwtToken","bind","this","setState","rel","target","href","description","Component","App","isAuthenticated","useIsAuthenticated","publicClientApplication","PublicClientApplication","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.17cfdd45.chunk.js","sourcesContent":["import React from \"react\";\nimport { useMsal } from \"@azure/msal-react\";\nimport \"./SignInButton.css\"\n\nfunction signInClickHandler(instance) {\n    instance.loginRedirect();\n}\n\n// SignInButton Component returns a button that invokes a popup login when clicked\nexport default function SignInButton() {\n    // useMsal hook will return the PublicClientApplication instance you provided to MsalProvider\n    const { instance } = useMsal();\n\n    return <div className=\"SignInButtonDiv\" ><button className=\"SignInButton\" onClick={() => signInClickHandler(instance)}>Sign In</button></div>\n};","import { LogLevel } from \"@azure/msal-browser\";\n\nexport const postLogoutRedirectUri = process.env.REACT_APP_POST_LOGOUT_REDIRECT_URL\n\nexport const loginRequest = {\n    scopes: [\"openid\",\"https://fgrsolutionsb2c.onmicrosoft.com/f5e3ba4f-960f-44c0-bd3d-1f0c4c959f0c/Hello\"] // might remove hello\n  };\n\nexport const msalConfig = {\n    auth: {\n        clientId: \"4bb294af-8713-4f8e-913d-a7fb84eba271\", //client of frontend app registration\n        authority: \"https://fgrsolutionsb2c.b2clogin.com/fgrsolutionsb2c.onmicrosoft.com/B2C_1_FGR_Secure_app_Frontend_signupandsignin\", \n        redirectUri: process.env.REACT_APP_LOGIN_REDIRECT_URL\n    },\n    cache: {\n        cacheLocation: \"sessionStorage\", // This configures where your cache will be stored\n        storeAuthStateInCookie: false, // Set this to \"true\" if you are having issues on IE11 or Edge\n    },\n    system: {\t\n        loggerOptions: {\t\n            loggerCallback: (level, message, containsPii) => {\t\n                if (containsPii) {\t\t\n                    return;\t\t\n                }\t\t\n                switch (level) {\t\t\n                    case LogLevel.Error:\t\t\n                        console.error(message);\t\t\n                        return;\t\t\n                    case LogLevel.Info:\t\t\n                        console.info(message);\t\t\n                        return;\t\t\n                    case LogLevel.Verbose:\t\t\n                        console.debug(message);\t\t\n                        return;\t\t\n                    default:\t\n                        console.warn(message);\t\t\n                    // case LogLevel.Warning:\t\t\n                    //     console.warn(message);\t\t\n                        return;\t\t\n                }\t\n            }\t\n        }\t\n    }\n  };","import { useMsal } from \"@azure/msal-react\";\nimport { postLogoutRedirectUri } from \"../../authConfig\"\nimport \"./SignOutButton.css\"\n\nfunction signOutClickHandler(instance) {\n    console.log(\"instance: \", instance)\n    const logoutRequest = {\n        account: instance.getAccountByHomeId(\"homeAccountId\"),\n        postLogoutRedirectUri: postLogoutRedirectUri\n    }\n    instance.logoutRedirect(logoutRequest);\n}\n\n// SignOutButton Component returns a button that invokes a redirect logout when clicked\nexport default function SignOutButton() {\n    // useMsal hook will return the PublicClientApplication instance you provided to MsalProvider\n    const { instance } = useMsal();\n\n    return <div className=\"SignOutButtonDiv\" ><button  className=\"SignOutButton\" onClick={() => signOutClickHandler(instance)}>Sign Out</button></div>\n};","import { useMsal } from \"@azure/msal-react\";\nimport React, { useEffect } from \"react\";\nimport { loginRequest } from \"../../authConfig\"\n\nexport default function ProfileContent(props) {\n    const { instance, accounts } = useMsal();\n\n    //The User should be Authenticated already\n    // Otherwise I would use const isAuthenticated = useIsAuthenticated();\n    useEffect(() => {\n        instance.acquireTokenSilent({\n            ...loginRequest,\n            account: accounts[0]\n        }).then(async (response) => {\n            console.log(\"RequestProfileData response:\", response)\n            props.setToken(response.accessToken)\n\n        });\n    });\n\n    return (<></>)\n}","import React, { useState } from \"react\";\nimport \"./APICaller.css\"\n\nexport default function APICaller(props) {\n    const [apiData, setApiData] = useState(null);\n\n    async function RequestAPIData() {\n        let apicall = props.apicall\n        let response = await apicall(props.token)\n        setApiData(response)\n    }\n\n    function ResetAPIData() {\n        setApiData(\"\")\n    }\n\n    return (<>\n        <div className=\"APICallerDIV\">\n            <div className=\"APICallerNameDIV\">\n                <h5 className=\"APICallerName\" >{props.name}</h5>\n            </div>\n\n            {/* <p>{props.description}</p> */}\n            <div className=\"APICallerFunFactBtnDIV\">\n                <button className=\"APICallerFunFactBtn\" onClick={RequestAPIData} >GET FUN FACT</button>\n            </div>\n\n            <div className=\"APICallerDataDIV\">\n                {apiData ? <p className=\"APICallerData\" >{JSON.stringify(apiData)}</p> : <p className=\"APICallerData\" >No API Data</p>}\n            </div>\n            <div className=\"APICallerClearBtnDIV\">\n                <button className=\"APICallerClearBtn\" onClick={ResetAPIData} >Clear Fun Fact</button>\n            </div>\n\n        </div>\n\n\n    </>)\n}","\n\nexport const kubernetesfunfactdescription=`\nThis endpoint returns 1 of 5 random fun facts about Kubernetes.\nThis Azure Kubernetes Service API endpoint uses a Mutual TLS connection with API Managment to secure access to its API. \nWithin the AKS Cluster, traffic is routed to this specifc API based on the Ingress Resource routing definitions.\nData is pulled from a persisting Azure Disc outside the cluster.`\n\nexport const microsoftfunfactdescription=`\nThis endpoint returns 1 of 5 random fun facts about Microsoft.\nThis Azure Kubernetes Service API endpoint uses a Mutual TLS connection with API Managment to secure access to its API. \nWithin the AKS Cluster, traffic is routed to this specifc API based on the Ingress Resource routing definitions.\nData is pulled from a persisting Azure Disc outside the cluster.`\n\nexport const computerhistoryfunfactdescription=`\nThis endpoint returns 1 of 5 random fun facts about the history of computers.\nThis Azure Function App endpoint pulls data from an Azure Table Storage database.\nThis demonstates the use of an Azure Function within an Azure API Management instance that uses several other types of backend APIS`\n\nexport const frankierivierafunfactdescription=`\nThis endpoint returns 1 of 5 random fun facts about the me. (Frankie Riviera).\nThis Azure Logic App endpoint pulls data from an Azure Table Storage database.\nThis demonstates the use of an Azure Logic App within an Azure API Management instance that uses several other types of backend APIS`","import axios from \"axios\";\n\nexport async function CallAzureFunction(accessToken){\n  \n    const options = {\n      headers: {'jwtAuthorization': accessToken}\n    };\n    \n    let response = await axios.get('https://fgr-secure-api-management.azure-api.net/function-app/ComputerFunFacts', options);\n    \n    const funfact = response.data.funfact\n    \n    return funfact\n}","import axios from \"axios\";\n\nexport async function CallLogicApp(accessToken){\n  \n    const options = {\n      headers: {'jwtAuthorization': accessToken}\n    };\n    \n    let response = await axios.get('https://fgr-secure-api-management.azure-api.net/frankie/request/paths/invoke/', options);\n    \n    const funfact = response.data.funfact\n    \n    return funfact\n}","import axios from \"axios\";\n\nexport async function CallAKS_KubernetesFunFact(accessToken){\n  \n    const options = {\n      headers: {'jwtAuthorization': accessToken}\n    };\n    \n    let response = await axios.get('https://fgr-secure-api-management.azure-api.net/aks/kubernetes/funfact', options);\n\n    let i = Math.floor(Math.random() * response.data.funfacts.length); \n    \n    const funfact = response.data.funfacts[i].fun_fact\n    \n    return funfact\n}\n\nexport async function CallAKS_MicrosoftFunFact(accessToken){\n  \n    const options = {\n      headers: {'jwtAuthorization': accessToken}\n    };\n    \n    let response = await axios.get('https://fgr-secure-api-management.azure-api.net/aks/microsoft/funfact', options);\n    \n    let i = Math.floor(Math.random() * response.data.funfacts.length); \n    \n    const funfact = response.data.funfacts[i].fun_fact\n    \n    return funfact\n}\n","import { AuthenticatedTemplate, UnauthenticatedTemplate } from \"@azure/msal-react\";\nimport React, { Component } from 'react';\nimport \"./HomePage.css\"\nimport SignInButton from \"./AuthComponents/SignInButton\"\nimport SignOutButton from \"./AuthComponents/SignOutButton\"\nimport GetToken from \"./AuthComponents/GetToken\"\nimport APICaller from \"./APICaller\"\nimport { kubernetesfunfactdescription, microsoftfunfactdescription, computerhistoryfunfactdescription, frankierivierafunfactdescription } from \"./apidescriptions\"\nimport { CallAzureFunction } from \"../api/azurefunctions\"\nimport { CallLogicApp } from \"../api/logicapp\"\nimport { CallAKS_KubernetesFunFact, CallAKS_MicrosoftFunFact } from \"../api/aks\"\n\nexport class HomePage extends Component {\n\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            jwtToken: \"\"\n        }\n\n        this.setToken = this.setToken.bind(this)\n    }\n\n    setToken(token) {\n        this.setState({\n            jwtToken: token\n        });\n    }\n\n    render() {\n        return (\n            <div className=\"HomePageDiv\" >\n                <h1 className=\"topheader\">FGR Secure API</h1>\n                <AuthenticatedTemplate>\n                    <div className=\"HomeInfoDiv\">\n                        <p>\n                            You can learn more about this live demo <a rel=\"noreferrer\" target=\"_blank\" href=\"https://frankieriviera.com\" >HERE</a>\n                        </p>\n                    </div>\n                    <div className=\"HomeInfoDiv\">\n                        <p>\n                            NOTE: With API Management Consumption Tier, APIs may experience cold starts.\n                        </p>\n                    </div>\n                    <div className=\"HomeInfoDiv\">\n                        <p>\n                            NOTE: Due to a limited number of fun facts in database, the same fun fact may be returned when an API is called.\n                        </p>\n                    </div>\n\n                    {/* {this.state.jwtToken ? <p>TOKEN READY FOR API CALLS!</p>:<p>NO TOKEN</p>} */}\n                    {/* <WelcomeUser /> */}\n                    {!this.state.jwtToken && <GetToken setToken={this.setToken} />}\n                    <hr></hr>\n                    <APICaller name={\"Azure Kubernetes Service endpoint - Kubernetes Fun Facts\"} description={kubernetesfunfactdescription} apicall={CallAKS_KubernetesFunFact} token={this.state.jwtToken} />\n                    <hr></hr>\n                    <APICaller name={\"Azure Kubernetes Service endpoint - Microsoft Fun Facts\"} description={microsoftfunfactdescription} apicall={CallAKS_MicrosoftFunFact} token={this.state.jwtToken} />\n                    <hr></hr>\n                    <APICaller name={\"Azure Function App endpoint - Computer History Fun Facts\"} description={computerhistoryfunfactdescription} apicall={CallAzureFunction} token={this.state.jwtToken} />\n                    <hr></hr>\n                    <APICaller name={\"Azure Logic App endpoint - Frankie Riviera Fun Facts\"} description={frankierivierafunfactdescription} apicall={CallLogicApp} token={this.state.jwtToken} />\n                    <hr></hr>\n                    {/* <APICaller name={\"MOCK ENDPOINT\"} apicall={CallMockEndpoint} token={this.state.jwtToken} />\n                    <hr></hr> */}\n\n                    <SignOutButton />\n\n                </AuthenticatedTemplate>\n                <UnauthenticatedTemplate>\n                    <div className=\"HomeInfoDiv\">\n                        <p>\n                            This UI demonstates the use of Azure Active Directory B2C in a Single Page Application.\n                            It also demonstates access to backend APIs through the use of an Azure API Managment Gateway.\n                            The APIs accessed through this gate way include Two different APIs within a Azure Kuberentes Service Cluster, An Azure Function, and an Azure Logic App.\n                            Sign in using an existing Microsoft account, or Signup with an email to test out the Live APIS.\n                        </p>\n                    </div>\n                    <SignInButton />\n                </UnauthenticatedTemplate>\n\n            </div>\n        )\n    }\n}\n\n\nexport default HomePage;\n","\nimport React from \"react\";\nimport HomePage from \"./components/HomePage\"\nimport { useIsAuthenticated } from \"@azure/msal-react\";\n\nfunction App(props) {\n  const isAuthenticated = useIsAuthenticated();\n  console.log(\"APP isAuthenticated: \",isAuthenticated)\n  return (\n    <>\n      <HomePage instance={props.instance} isAuthenticated={isAuthenticated}/>\n    </>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { PublicClientApplication } from \"@azure/msal-browser\";\nimport { MsalProvider } from \"@azure/msal-react\";\nimport App from './App';\nimport { msalConfig } from \"./authConfig\";\n\n// create PublicClientApplication instance\nconst publicClientApplication = new PublicClientApplication(msalConfig);\n\n// Wrap your app component tree in the MsalProvider component\nReactDOM.render(\n    <React.StrictMode>\n        <MsalProvider instance={publicClientApplication}>\n            <App instance={publicClientApplication} />\n        </ MsalProvider>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n"],"sourceRoot":""}