(this["webpackJsonpfgr-secure-api"]=this["webpackJsonpfgr-secure-api"]||[]).push([[0],{32:function(e,t,n){},33:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(22),c=n.n(s),i=n(2),o=n(6),u=n(23),l=n(24),f=n(11),h=n(26),p=n(25),d=(n(32),n(33),n(0));function j(){var e=Object(o.e)().instance;return Object(d.jsx)("div",{className:"SignInButtonDiv",children:Object(d.jsx)("button",{className:"SignInButton",onClick:function(){return function(e){e.loginRedirect()}(e)},children:"Sign In"})})}var b={scopes:["openid","https://fgrsolutionsb2c.onmicrosoft.com/f5e3ba4f-960f-44c0-bd3d-1f0c4c959f0c/Hello"]},m={auth:{clientId:"4bb294af-8713-4f8e-913d-a7fb84eba271",authority:"https://fgrsolutionsb2c.b2clogin.com/fgrsolutionsb2c.onmicrosoft.com/B2C_1_FGR_Secure_app_Frontend_signupandsignin",redirectUri:"https://dariv94.github.io/fgr-secure-api/"},cache:{cacheLocation:"sessionStorage",storeAuthStateInCookie:!1},system:{loggerOptions:{loggerCallback:function(e,t,n){if(!n)switch(e){case i.e.Error:return void console.error(t);case i.e.Info:return void console.info(t);case i.e.Verbose:return void console.debug(t);default:return void console.warn(t)}}}}};n(35);function g(){var e=Object(o.e)().instance;return Object(d.jsx)("div",{className:"SignOutButtonDiv",children:Object(d.jsx)("button",{className:"SignOutButton",onClick:function(){return function(e){console.log("instance: ",e);var t={account:e.getAccountByHomeId("homeAccountId"),postLogoutRedirectUri:"https://dariv94.github.io/fgr-secure-api/"};e.logoutRedirect(t)}(e)},children:"Sign Out"})})}var A=n(3),O=n.n(A),v=n(5),x=n(13);function I(e){var t=Object(o.e)(),n=t.instance,r=t.accounts;return Object(a.useEffect)((function(){n.acquireTokenSilent(Object(x.a)(Object(x.a)({},b),{},{account:r[0]})).then(function(){var t=Object(v.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("RequestProfileData response:",n),e.setToken(n.accessToken);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())})),Object(d.jsx)(d.Fragment,{})}var k=n(7);n(36);function w(e){var t=Object(a.useState)(null),n=Object(k.a)(t,2),r=n[0],s=n[1];function c(){return(c=Object(v.a)(O.a.mark((function t(){var n,a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.apicall,t.next=3,n(e.token);case 3:a=t.sent,s(a);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"APICallerDIV",children:[Object(d.jsx)("div",{className:"APICallerNameDIV",children:Object(d.jsx)("h5",{className:"APICallerName",children:e.name})}),Object(d.jsx)("div",{className:"APICallerFunFactBtnDIV",children:Object(d.jsx)("button",{className:"APICallerFunFactBtn",onClick:function(){return c.apply(this,arguments)},children:"GET FUN FACT"})}),Object(d.jsx)("div",{className:"APICallerDataDIV",children:r?Object(d.jsx)("p",{className:"APICallerData",children:JSON.stringify(r)}):Object(d.jsx)("p",{className:"APICallerData",children:"No API Data"})}),Object(d.jsx)("div",{className:"APICallerClearBtnDIV",children:Object(d.jsx)("button",{className:"APICallerClearBtn",onClick:function(){s("")},children:"Clear Fun Fact"})})]})})}var P=n(8),T=n.n(P);function S(e){return F.apply(this,arguments)}function F(){return(F=Object(v.a)(O.a.mark((function e(t){var n,a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{jwtAuthorization:t}},e.next=3,T.a.get("https://fgr-secure-api-management.azure-api.net/function-app/ComputerFunFacts",n);case 3:return a=e.sent,r=a.data.funfact,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){return C.apply(this,arguments)}function C(){return(C=Object(v.a)(O.a.mark((function e(t){var n,a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{jwtAuthorization:t}},e.next=3,T.a.get("https://fgr-secure-api-management.azure-api.net/frankie/request/paths/invoke/",n);case 3:return a=e.sent,r=a.data.funfact,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return N.apply(this,arguments)}function N(){return(N=Object(v.a)(O.a.mark((function e(t){var n,a,r,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{jwtAuthorization:t}},e.next=3,T.a.get("https://fgr-secure-api-management.azure-api.net/aks/kubernetes/funfact",n);case 3:return a=e.sent,r=Math.floor(Math.random()*a.data.funfacts.length),s=a.data.funfacts[r].fun_fact,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return M.apply(this,arguments)}function M(){return(M=Object(v.a)(O.a.mark((function e(t){var n,a,r,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{jwtAuthorization:t}},e.next=3,T.a.get("https://fgr-secure-api-management.azure-api.net/aks/microsoft/funfact",n);case 3:return a=e.sent,r=Math.floor(Math.random()*a.data.funfacts.length),s=a.data.funfacts[r].fun_fact,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={selectedFile:"",loading:!1,responseImage:"",message:"Select a file to upload.",jwtToken:""},a.setToken=a.setToken.bind(Object(f.a)(a)),a}return Object(l.a)(n,[{key:"setToken",value:function(e){this.setState({jwtToken:e})}},{key:"render",value:function(){return Object(d.jsxs)("div",{className:"HomePageDiv",children:[Object(d.jsx)("h1",{className:"topheader",children:"FGR Secure API"}),Object(d.jsxs)(o.a,{children:[Object(d.jsx)("div",{className:"HomeInfoDiv",children:Object(d.jsxs)("p",{children:["You can learn more about this live demo ",Object(d.jsx)("a",{rel:"noreferrer",target:"_blank",href:"https://frankieriviera.com",children:"HERE"})]})}),!this.state.jwtToken&&Object(d.jsx)(I,{setToken:this.setToken}),Object(d.jsx)("hr",{}),Object(d.jsx)(w,{name:"Azure Kubernetes Service endpoint - Kubernetes Fun Facts",description:"\nThis endpoint returns 1 of 5 random fun facts about Kubernetes.\nThis Azure Kubernetes Service API endpoint uses a Mutual TLS connection with API Managment to secure access to its API. \nWithin the AKS Cluster, traffic is routed to this specifc API based on the Ingress Resource routing definitions.\nData is pulled from a persisting Azure Disc outside the cluster.",apicall:y,token:this.state.jwtToken}),Object(d.jsx)("hr",{}),Object(d.jsx)(w,{name:"Azure Kubernetes Service endpoint - Microsoft Fun Facts",description:"\nThis endpoint returns 1 of 5 random fun facts about Microsoft.\nThis Azure Kubernetes Service API endpoint uses a Mutual TLS connection with API Managment to secure access to its API. \nWithin the AKS Cluster, traffic is routed to this specifc API based on the Ingress Resource routing definitions.\nData is pulled from a persisting Azure Disc outside the cluster.",apicall:D,token:this.state.jwtToken}),Object(d.jsx)("hr",{}),Object(d.jsx)(w,{name:"Azure Function App endpoint - Computer History Fun Facts",description:"\nThis endpoint returns 1 of 5 random fun facts about the history of computers.\nThis Azure Function App endpoint pulls data from an Azure Table Storage database.\nThis demonstates the use of an Azure Function within an Azure API Management instance that uses several other types of backend APIS",apicall:S,token:this.state.jwtToken}),Object(d.jsx)("hr",{}),Object(d.jsx)(w,{name:"Azure Logic App endpoint - Frankie Riviera Fun Facts",description:"\nThis endpoint returns 1 of 5 random fun facts about the me. (Frankie Riviera).\nThis Azure Logic App endpoint pulls data from an Azure Table Storage database.\nThis demonstates the use of an Azure Logic App within an Azure API Management instance that uses several other types of backend APIS",apicall:z,token:this.state.jwtToken}),Object(d.jsx)("hr",{}),Object(d.jsx)(g,{})]}),Object(d.jsxs)(o.c,{children:[Object(d.jsx)("div",{className:"HomeInfoDiv",children:Object(d.jsx)("p",{children:"This UI demonstates the use of Azure Active Directory B2C in a Single Page Application. It also demonstates access to backend APIs through the use of an Azure API Managment Gateway. The APIs accessed through this gate way include Two different APIs within a Azure Kuberentes Service Cluster, An Azure Function, and an Azure Logic App. Sign in using an existing Microsoft account, or Signup with an email to test out the Live APIS."})}),Object(d.jsx)(j,{})]})]})}}]),n}(a.Component);var R=function(e){var t=Object(o.d)();return console.log("APP isAuthenticated: ",t),Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(B,{instance:e.instance,isAuthenticated:t})})},K=new i.g(m);c.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(o.b,{instance:K,children:Object(d.jsx)(R,{instance:K})})}),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.4a870af7.chunk.js.map